{"ast":null,"code":"var _jsxFileName = \"/Users/gimsang-wan/Desktop/Endless-react-admin-template/endless 1/src/components/applications/contact-app/edit-user.js\";\nimport React, { Fragment, useState, useEffect } from 'react';\nimport Breadcrumb from '../../common/breadcrumb';\nimport logo from '../../../assets/images/endless-logo.png';\nimport userDemoPic from '../../../assets/images/user/user.png';\nimport useForm from 'react-hook-form';\nimport { editUser } from '../../../services/contact.service';\nimport firebase from '../../../data/base';\n\nconst NewUser = props => {\n  const [url, setUrl] = useState();\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm(); // initialise the hook\n\n  const db = firebase.firestore();\n  const [data, setData] = useState();\n  const [userId, setUserId] = useState();\n  const id = props.match.params.id;\n  useEffect(() => {\n    setUserId(id);\n    const isSubscribed = db.collection(\"contactApp\").doc(id).onSnapshot(function (doc) {\n      const user = doc.data();\n      setData(user);\n      setUrl(user.avatar);\n    });\n    return () => isSubscribed();\n  }, [db, id]);\n\n  const onSubmit = data => {\n    if (data !== '') {\n      editUser(data, url, userId);\n      props.history.push('/contact-app/contact');\n    } else {\n      errors.showMessages();\n    }\n  };\n\n  const renderContact = () => {\n    props.history.push('/contact-app/contact');\n  };\n\n  const readUrl = event => {\n    if (event.target.files.length === 0) return; //Image upload validation\n\n    var mimeType = event.target.files[0].type;\n\n    if (mimeType.match(/image\\/*/) == null) {\n      return;\n    } // Image upload\n\n\n    var reader = new FileReader();\n    reader.readAsDataURL(event.target.files[0]);\n\n    reader.onload = _event => {\n      setUrl(reader.result);\n    };\n  };\n\n  return data ? /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Breadcrumb, {\n    title: \"Edit User\",\n    parent: \"Contact\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"authentication-box contact-profile-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center user-profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hovercard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contact-profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"rounded-circle img-100\",\n    src: url ? url : userDemoPic,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"icon-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"icofont icofont-pencil-alt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"upload\",\n    type: \"file\",\n    onChange: e => readUrl(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 53\n    }\n  })))))), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"theme-form\",\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-form-label pt-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 41\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    name: \"name\",\n    defaultValue: data.name,\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 41\n    }\n  }), errors.name && 'First name is required'), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 41\n    }\n  }, \"Surname\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    name: \"surname\",\n    defaultValue: data.surname,\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 41\n    }\n  }), errors.surname && 'Last name is required'), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 41\n    }\n  }, \"Mobile\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"number\",\n    name: \"mobile\",\n    defaultValue: data.mobile,\n    ref: register({\n      pattern: /\\d+/,\n      minlength: 0,\n      maxlength: 9\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 41\n    }\n  }), errors.mobile && 'Please enter number max 9 digit'), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 41\n    }\n  }, \"Age\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"number\",\n    name: \"age\",\n    defaultValue: data.age,\n    ref: register({\n      required: true,\n      pattern: /\\d+/,\n      min: 18,\n      max: 70\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 41\n    }\n  }), errors.age && 'Please enter age between 18 to 70 year.'), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group form-row mt-3 mb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary mr-2\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 41\n    }\n  }, \" Submit\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    type: \"button\",\n    \"data-original-title\": \"btn btn-info-gradien\",\n    title: \"\",\n    onClick: renderContact,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 41\n    }\n  }, \"Cancel\"))))))))) : '';\n};\n\nexport default NewUser;","map":{"version":3,"sources":["/Users/gimsang-wan/Desktop/Endless-react-admin-template/endless 1/src/components/applications/contact-app/edit-user.js"],"names":["React","Fragment","useState","useEffect","Breadcrumb","logo","userDemoPic","useForm","editUser","firebase","NewUser","props","url","setUrl","register","handleSubmit","errors","db","firestore","data","setData","userId","setUserId","id","match","params","isSubscribed","collection","doc","onSnapshot","user","avatar","onSubmit","history","push","showMessages","renderContact","readUrl","event","target","files","length","mimeType","type","reader","FileReader","readAsDataURL","onload","_event","result","e","name","required","surname","mobile","pattern","minlength","maxlength","age","min","max"],"mappings":"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","sourcesContent":["import React, { Fragment, useState ,useEffect} from 'react';\nimport Breadcrumb from '../../common/breadcrumb';\nimport logo from '../../../assets/images/endless-logo.png';\nimport userDemoPic from '../../../assets/images/user/user.png';\nimport useForm from 'react-hook-form';\nimport { editUser } from '../../../services/contact.service';\nimport firebase from '../../../data/base';\n\nconst NewUser = (props) => {\n    const [url, setUrl] = useState();\n    const { register, handleSubmit, errors } = useForm(); // initialise the hook\n    const db = firebase.firestore();\n    const [data, setData] = useState();\n    const [userId, setUserId] = useState();\n    const id = props.match.params.id;\n\n    useEffect(() => {\n        \n        setUserId(id);\n        const isSubscribed = db.collection(\"contactApp\").doc(id)\n                .onSnapshot(function(doc) {\n                    const user = doc.data();\n                    setData(user);\n                    setUrl(user.avatar)\n                });\n        return () => isSubscribed();\n    },[db , id]);\n\n    const onSubmit = data => {\n        if (data !== '') {\n            editUser(data, url ,userId);\n            props.history.push('/contact-app/contact');\n        } else {\n            errors.showMessages();\n        }\n    };\n\n    const renderContact = () => {\n        props.history.push('/contact-app/contact');\n    }\n\n    const readUrl = (event) => {\n        if (event.target.files.length === 0)\n            return;\n        //Image upload validation\n        var mimeType = event.target.files[0].type;\n\n        if (mimeType.match(/image\\/*/) == null) {\n            return;\n        }\n        // Image upload\n        var reader = new FileReader();\n        reader.readAsDataURL(event.target.files[0]);\n        reader.onload = (_event) => {\n            setUrl(reader.result)\n        }   \n    }\n    return (\n        data?\n        <Fragment>\n            <Breadcrumb title=\"Edit User\" parent=\"Contact\" />\n            <div className=\"container-fluid\">\n                <div className=\"\">\n                    <div className=\"authentication-box contact-profile-form\">\n                        <div className=\"text-center\">\n                            <img src={logo} alt=\"logo\" /></div>\n                        <div className=\"card mt-4\">\n                            <div className=\"card-body\">\n                                <div className=\"text-center user-profile\">\n                                    <div className=\"hovercard\">\n                                        <div className=\"contact-profile\">\n                                            <img className=\"rounded-circle img-100\" src={url ? url : userDemoPic} alt=\"\" />\n                                            <div className=\"icon-wrapper\">\n                                                <i className=\"icofont icofont-pencil-alt-5\">\n                                                    <input className=\"upload\" type=\"file\" onChange={(e) => readUrl(e)} />\n                                                </i>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <form className=\"theme-form\" onSubmit={handleSubmit(onSubmit)}>\n                                    <div className=\"form-group\">\n                                        <label className=\"col-form-label pt-0\">Name</label>\n                                        <input className=\"form-control\" type=\"text\" name=\"name\" defaultValue={data.name} ref={register({ required: true })} />\n                                        {errors.name && 'First name is required'}\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label className=\"col-form-label\">Surname</label>\n                                        <input className=\"form-control\" type=\"text\" name=\"surname\" defaultValue={data.surname} ref={register({ required: true })} />\n                                        {errors.surname && 'Last name is required'}\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label className=\"col-form-label\">Mobile</label>\n                                        <input className=\"form-control\" type=\"number\" name=\"mobile\" defaultValue={data.mobile} ref={register({ pattern: /\\d+/, minlength: 0, maxlength: 9 })} />\n                                        {errors.mobile && 'Please enter number max 9 digit'}\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <label className=\"col-form-label\">Age</label>\n                                        <input className=\"form-control\" type=\"number\" name=\"age\" defaultValue={data.age} ref={register({ required: true, pattern: /\\d+/, min: 18, max: 70 })} />\n                                        {errors.age && 'Please enter age between 18 to 70 year.'}\n                                    </div>\n                                    <div className=\"form-group form-row mt-3 mb-0\">\n                                        <button className=\"btn btn-primary mr-2\" type=\"submit\"> Submit\n                                        </button>\n                                        <button className=\"btn btn-primary\" type=\"button\" data-original-title=\"btn btn-info-gradien\" title=\"\" onClick={renderContact}>\n                                            Cancel\n                                        </button>\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </Fragment>\n    :''\n    );\n};\n\nexport default NewUser;"]},"metadata":{},"sourceType":"module"}