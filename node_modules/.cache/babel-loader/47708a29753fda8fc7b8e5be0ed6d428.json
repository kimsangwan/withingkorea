{"ast":null,"code":"// contains, add, remove, toggle\nvar indexof = require('indexof');\n\nmodule.exports = ClassList;\n\nfunction ClassList(elem) {\n  var cl = elem.classList;\n\n  if (cl) {\n    return cl;\n  }\n\n  var classList = {\n    add: add,\n    remove: remove,\n    contains: contains,\n    toggle: toggle,\n    toString: $toString,\n    length: 0,\n    item: item\n  };\n  return classList;\n\n  function add(token) {\n    var list = getTokens();\n\n    if (indexof(list, token) > -1) {\n      return;\n    }\n\n    list.push(token);\n    setTokens(list);\n  }\n\n  function remove(token) {\n    var list = getTokens(),\n        index = indexof(list, token);\n\n    if (index === -1) {\n      return;\n    }\n\n    list.splice(index, 1);\n    setTokens(list);\n  }\n\n  function contains(token) {\n    return indexof(getTokens(), token) > -1;\n  }\n\n  function toggle(token) {\n    if (contains(token)) {\n      remove(token);\n      return false;\n    } else {\n      add(token);\n      return true;\n    }\n  }\n\n  function $toString() {\n    return elem.className;\n  }\n\n  function item(index) {\n    var tokens = getTokens();\n    return tokens[index] || null;\n  }\n\n  function getTokens() {\n    var className = elem.className;\n    return filter(className.split(\" \"), isTruthy);\n  }\n\n  function setTokens(list) {\n    var length = list.length;\n    elem.className = list.join(\" \");\n    classList.length = length;\n\n    for (var i = 0; i < list.length; i++) {\n      classList[i] = list[i];\n    }\n\n    delete list[length];\n  }\n}\n\nfunction filter(arr, fn) {\n  var ret = [];\n\n  for (var i = 0; i < arr.length; i++) {\n    if (fn(arr[i])) ret.push(arr[i]);\n  }\n\n  return ret;\n}\n\nfunction isTruthy(value) {\n  return !!value;\n}","map":null,"metadata":{},"sourceType":"script"}