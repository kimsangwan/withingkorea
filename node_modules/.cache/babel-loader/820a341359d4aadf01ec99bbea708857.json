{"ast":null,"code":"import _slicedToArray from \"/Users/gimsang-wan/Desktop/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8\\u110C\\u116E\\u11BC/Withing_admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/gimsang-wan/Desktop/\\u110C\\u1161\\u11A8\\u110B\\u1165\\u11B8\\u110C\\u116E\\u11BC/Withing_admin/src/recommendOneday/RecommendOdyUpdate.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"../assets/css/layout.css\";\nimport Breadcrumb from \"../components/common/breadcrumb\";\nimport one from \"../assets/images/user/1.jpg\";\nimport axios from \"axios\";\nimport Cookie from \"js-cookie\";\nimport { useHistory } from \"react-router-dom\";\nimport RecomendList from \"./RecommedList\";\n\nconst RcomendOneDayUpdate = ({\n  match\n}) => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        connectList = _useState2[0],\n        setconnectList = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        searchText = _useState4[0],\n        setSearchText = _useState4[1];\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        guideList = _useState6[0],\n        setguideList = _useState6[1];\n\n  const _useState7 = useState(0),\n        _useState8 = _slicedToArray(_useState7, 2),\n        ViewLank = _useState8[0],\n        setViewLank = _useState8[1];\n\n  const history = useHistory();\n  useEffect(() => {\n    let form = new FormData();\n    console.log(match.params.id);\n    form.append(\"rec_no\", match.params.id); // 데이터 가져오기\n\n    axios.post(\"/api/v1/recommend/editPageT\", form, {\n      headers: {\n        Authorization: Cookie.get(\"token\")\n      }\n    }).then(function (response) {\n      setViewLank(response.data.data.z_index); // setguideList(response.data.data.tour_no)\n\n      console.log(response.data.data); // 데이터불러오는데 성공했는지 확인 if\n    }); // 데이터 가져온후에 state 바인딩\n  }, []);\n\n  const searchhandler = () => {\n    if (!searchText) {\n      alert(\"한글자이상입력하세요\");\n      return;\n    }\n\n    const form = new FormData();\n    form.append(\"index\", 1);\n    form.append(\"lang\", \"en\");\n    form.append(\"search\", searchText);\n    axios.post(\"/api/v1/recommend/searchT\", form, {\n      headers: {\n        Authorization: Cookie.get(\"token\")\n      }\n    }).then(response => {\n      console.log(response);\n\n      if (response.data.status === \"success\") {\n        // if (response.data.data.count > 0) {\n        //   setguideList(response.data.data.list)\n        // } else {\n        //   alert(\"일치하는 가이드가 없습니다\")\n        //   setguideList([])\n        // }\n        console.log(guideList);\n      }\n    }).catch(err => {\n      alert(\"검색한데이터를 불러오지못했습니다\");\n    });\n  };\n\n  const addBtn = (name, img, tour_no) => {\n    const userInfo = {\n      name,\n      img,\n      tour_no\n    };\n    setconnectList([userInfo]);\n  };\n\n  const onSubmithandler = async e => {\n    if (connectList.length <= 0) {\n      alert(\" 연결할 가이드를검색후 추가해주세요\");\n      return;\n    } else if (ViewLank === 0) {\n      alert(\"노출순위는 1이상 지정해주세요\");\n      return;\n    }\n\n    let form = new FormData();\n    form.append(\"z_index\", ViewLank);\n    form.append(\"lang\", \"en\");\n    form.append(\"tour_no\", connectList[0].tour_no);\n    const cookie = Cookie.get(\"token\");\n\n    try {\n      const _ref = await axios.post(\"/api/v1/recommend/addT\", form, {\n        headers: {\n          Authorization: cookie\n        }\n      }),\n            data = _ref.data;\n\n      if (data.status === \"success\") {\n        alert(\"성공적으로 작성되었습니다.\");\n        history.push(\"/recommendlist\");\n      }\n    } catch (error) {\n      alert(\"작성하는데 실패했습니다.\");\n    }\n  };\n\n  const onRemove = () => {\n    setconnectList([]);\n  };\n\n  const onReset = () => {\n    setconnectList([]);\n    setSearchText(\"\");\n    setguideList([]);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(Breadcrumb, {\n    title: \"\\uCD94\\uCC9C \\uC6D0\\uB370\\uC774\\uD22C\\uC5B4 \\uC5F0\\uACB0\\uD558\\uAE30\",\n    parent: \"\\uCD94\\uCC9C \\uAC00\\uC774\\uB4DC \\uAD00\\uB9AC\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"col-sm-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card-body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \" oneday-cont\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, connectList.map((inFolist, index) => React.createElement(React.Fragment, null, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, \"\\uCD94\\uCC9C \\uC6D0\\uB370\\uC774\\uD22C\\uC5B4 \\uC0C1\\uD488\\uC5F0\\uACB0\"), React.createElement(\"div\", {\n    className: \"oneday-sub-bar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, \"\\uB178\\uCD9C\\uC21C\\uC704\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: \" form-control\",\n    type: \"number\",\n    min: \"1\",\n    max: \"99\",\n    defaultValue: \"0\",\n    onChange: e => setViewLank(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"onday-total-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"guide-left-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"avatar ratio\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: \"b-r-8 height-80\",\n    src: inFolist.img,\n    alt: \"#\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  })), \"\\xA0 \\xA0\", React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, \"\\uAC00\\uC774\\uB4DC\\uBA85:\", inFolist.name, \"/\\uB098\\uC774:/\\uC5B8\\uC5B4:/\")), React.createElement(\"div\", {\n    className: \"onday-right-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-square btn-danger btn-s\",\n    type: \"button\",\n    onClick: onRemove,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, \"\\uC0AD\\uC81C\"))))))), React.createElement(\"div\", {\n    className: \"oneday-seach-box2 \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"size-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    value: searchText,\n    onChange: e => setSearchText(e.target.value),\n    placeholder: \"\\uAC00\\uC774\\uB4DC\\uC758 \\uC774\\uB984\\uC744 \\uC601\\uC5B4\\uB85C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n    onKeyDown: e => {\n      if (e.key === \"Enter\") {\n        searchhandler();\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }), React.createElement(\"i\", {\n    className: \"fa fa-search fa-2x\",\n    onClick: searchhandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  })), guideList && guideList.map((list, index) => React.createElement(\"div\", {\n    className: \"onday-total-box2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"onday-left-box2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: \"img-50 b-r-15\",\n    src: list.rep_image,\n    alt: \"#\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }), \"\\xA0 \\xA0\", React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, \"price : \", list.en_price, \" $ / Title:\", list.en_name, \"/ Name :\", list.guide_name)), React.createElement(\"div\", {\n    className: \"oneday-right-box2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-square btn-warning btn-s\",\n    type: \"button\",\n    onClick: () => addBtn(list.en_name, list.rep_image, list.tour_no),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, \"\\uCD94\\uAC00\"))))), React.createElement(\"div\", {\n    className: \"btn-div\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-square btn-danger btn-sm\",\n    type: \"button\",\n    onClick: onReset,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, \"\\uCD08\\uAE30\\uD654\"), \"\\xA0 \\xA0\", React.createElement(\"button\", {\n    className: \"btn btn-square btn-light btn-sm \",\n    onClick: onSubmithandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226\n    },\n    __self: this\n  }, \"\\uD655\\uC778\"))))));\n}; // function MachingG() {\n//   const [searchText, setSearchText] = useState(\"\")\n//   const [guideList, setguideList] = useState([])\n//   const [connectList, setconnectList] = useState([])\n//   const history = useHistory()\n//   const searchhandler = () => {\n//     if (!searchText) {\n//       alert(\"한글자이상입력하세요\")\n//       return\n//     }\n//     const form = new FormData()\n//     form.append(\"index\", 1)\n//     form.append(\"lang\", \"en\")\n//     form.append(\"search\", searchText)\n//     axios\n//       .post(\"/api/v1/recommend/searchT\", form, {\n//         headers: {\n//           Authorization: Cookie.get(\"token\")\n//         }\n//       })\n//       .then(response => {\n//         console.log(response)\n//         if (response.data.status === \"success\") {\n//           if (response.data.data.count > 0) {\n//             setguideList(response.data.data.list)\n//           } else {\n//             alert(\"일치하는 가이드가 없습니다\")\n//             setguideList([])\n//           }\n//         }\n//       })\n//       .catch(err => {\n//         alert(\"검색한데이터를 불러오지못했습니다\")\n//       })\n//   }\n//   return (\n//     <>\n//       {\" \"}\n//       <div className=\"oneday-seach-box2 \">\n//         <div className=\"size-box\">\n//           <input\n//             className=\"form-control\"\n//             type=\"text\"\n//             value={searchText}\n//             onChange={e => setSearchText(e.target.value)}\n//             placeholder=\"가이드의 이름을 한글로입력해주세요\"\n//             onKeyDown={e => {\n//               if (e.key === \"Enter\") {\n//                 searchhandler()\n//               }\n//             }}\n//           />\n//           <i className=\"fa fa-search fa-2x\" onClick={searchhandler} />\n//         </div>\n//         {guideList.map((lists, index) => (\n//           <div className=\"onday-total-box2\">\n//             <div className=\"onday-left-box2\">\n//               <img className=\"img-50 b-r-15\" src={lists.rep_image} alt=\"#\" />\n//               &nbsp; &nbsp;\n//               <div>\n//                 가격 : {lists.en_price}/상품명누락/Name :{lists.en_name}\n//               </div>\n//             </div>\n//             <div className=\"oneday-right-box2\">\n//               <button\n//                 className=\"btn btn-square btn-warning btn-s\"\n//                 type=\"button\"\n//                 onClick={() => {\n//                   history.push(`/recomdoned/cnt/${lists.tour_no}`)\n//                 }}\n//               >\n//                 추가\n//               </button>\n//             </div>\n//           </div>\n//         ))}\n//       </div>\n//     </>\n//   )\n// }\n\n\nexport default RcomendOneDayUpdate;","map":{"version":3,"sources":["/Users/gimsang-wan/Desktop/작업중/Withing_admin/src/recommendOneday/RecommendOdyUpdate.js"],"names":["React","useState","useEffect","Breadcrumb","one","axios","Cookie","useHistory","RecomendList","RcomendOneDayUpdate","match","connectList","setconnectList","searchText","setSearchText","guideList","setguideList","ViewLank","setViewLank","history","form","FormData","console","log","params","id","append","post","headers","Authorization","get","then","response","data","z_index","searchhandler","alert","status","catch","err","addBtn","name","img","tour_no","userInfo","onSubmithandler","e","length","cookie","push","error","onRemove","onReset","map","inFolist","index","target","value","key","list","rep_image","en_price","en_name","guide_name"],"mappings":"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J,CA9CF,EA6FE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,SAAS,EAAC,kCADZ;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,OAAO,EAAES,OAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eASE;AACE,IAAA,SAAS,EAAC,kCADZ;AAEE,IAAA,OAAO,EAAEP,eAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBATF,CA7FF,CADF,CADF,CAHF,CADF;AAwHD,CApOD,C,CAsOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,eAAepC,mBAAf","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport \"../assets/css/layout.css\"\nimport Breadcrumb from \"../components/common/breadcrumb\"\nimport one from \"../assets/images/user/1.jpg\"\nimport axios from \"axios\"\nimport Cookie from \"js-cookie\"\nimport { useHistory } from \"react-router-dom\"\nimport RecomendList from \"./RecommedList\"\n\nconst RcomendOneDayUpdate = ({ match }) => {\n  const [connectList, setconnectList] = useState([])\n  const [searchText, setSearchText] = useState(\"\")\n  const [guideList, setguideList] = useState([])\n  const [ViewLank, setViewLank] = useState(0)\n  const history = useHistory()\n\n  useEffect(() => {\n    let form = new FormData()\n    console.log(match.params.id)\n    form.append(\"rec_no\", match.params.id)\n\n    // 데이터 가져오기\n    axios\n      .post(\"/api/v1/recommend/editPageT\", form, {\n        headers: { Authorization: Cookie.get(\"token\") }\n      })\n      .then(function(response) {\n        setViewLank(response.data.data.z_index)\n        // setguideList(response.data.data.tour_no)\n        console.log(response.data.data)\n        // 데이터불러오는데 성공했는지 확인 if\n      })\n    // 데이터 가져온후에 state 바인딩\n  }, [])\n\n  const searchhandler = () => {\n    if (!searchText) {\n      alert(\"한글자이상입력하세요\")\n      return\n    }\n\n    const form = new FormData()\n    form.append(\"index\", 1)\n    form.append(\"lang\", \"en\")\n    form.append(\"search\", searchText)\n\n    axios\n      .post(\"/api/v1/recommend/searchT\", form, {\n        headers: {\n          Authorization: Cookie.get(\"token\")\n        }\n      })\n      .then(response => {\n        console.log(response)\n        if (response.data.status === \"success\") {\n          // if (response.data.data.count > 0) {\n          //   setguideList(response.data.data.list)\n          // } else {\n          //   alert(\"일치하는 가이드가 없습니다\")\n          //   setguideList([])\n          // }\n          console.log(guideList)\n        }\n      })\n      .catch(err => {\n        alert(\"검색한데이터를 불러오지못했습니다\")\n      })\n  }\n\n  const addBtn = (name, img, tour_no) => {\n    const userInfo = {\n      name,\n      img,\n      tour_no\n    }\n    setconnectList([userInfo])\n  }\n\n  const onSubmithandler = async e => {\n    if (connectList.length <= 0) {\n      alert(\" 연결할 가이드를검색후 추가해주세요\")\n      return\n    } else if (ViewLank === 0) {\n      alert(\"노출순위는 1이상 지정해주세요\")\n      return\n    }\n\n    let form = new FormData()\n\n    form.append(\"z_index\", ViewLank)\n    form.append(\"lang\", \"en\")\n    form.append(\"tour_no\", connectList[0].tour_no)\n\n    const cookie = Cookie.get(\"token\")\n    try {\n      const { data } = await axios.post(\"/api/v1/recommend/addT\", form, {\n        headers: {\n          Authorization: cookie\n        }\n      })\n      if (data.status === \"success\") {\n        alert(\"성공적으로 작성되었습니다.\")\n        history.push(\"/recommendlist\")\n      }\n    } catch (error) {\n      alert(\"작성하는데 실패했습니다.\")\n    }\n  }\n  const onRemove = () => {\n    setconnectList([])\n  }\n  const onReset = () => {\n    setconnectList([])\n    setSearchText(\"\")\n    setguideList([])\n  }\n\n  return (\n    <div>\n      <Breadcrumb title=\"추천 원데이투어 연결하기\" parent=\"추천 가이드 관리\" />\n\n      <div className=\"col-sm-12\">\n        <div className=\"card\">\n          <div className=\"card-body\">\n            <div className=\" oneday-cont\">\n              <div>\n                {connectList.map((inFolist, index) => (\n                  <>\n                    <h3>추천 원데이투어 상품연결</h3>\n\n                    <div className=\"oneday-sub-bar\">\n                      <h3>노출순위</h3>\n                      <div>\n                        <input\n                          className=\" form-control\"\n                          type=\"number\"\n                          min=\"1\"\n                          max=\"99\"\n                          defaultValue=\"0\"\n                          onChange={e => setViewLank(e.target.value)}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"onday-total-box\">\n                      <div className=\"guide-left-box\">\n                        <div className=\"avatar ratio\">\n                          <img\n                            className=\"b-r-8 height-80\"\n                            src={inFolist.img}\n                            alt=\"#\"\n                          />\n                        </div>\n                        &nbsp; &nbsp;\n                        <h2>가이드명:{inFolist.name}/나이:/언어:/</h2>\n                      </div>\n                      <div className=\"onday-right-box\">\n                        <button\n                          className=\"btn btn-square btn-danger btn-s\"\n                          type=\"button\"\n                          onClick={onRemove}\n                        >\n                          삭제\n                        </button>\n                      </div>\n                    </div>\n                  </>\n                ))}\n              </div>\n            </div>\n            <div className=\"oneday-seach-box2 \">\n              <div className=\"size-box\">\n                <input\n                  className=\"form-control\"\n                  type=\"text\"\n                  value={searchText}\n                  onChange={e => setSearchText(e.target.value)}\n                  placeholder=\"가이드의 이름을 영어로 입력해주세요\"\n                  onKeyDown={e => {\n                    if (e.key === \"Enter\") {\n                      searchhandler()\n                    }\n                  }}\n                />\n\n                <i className=\"fa fa-search fa-2x\" onClick={searchhandler} />\n              </div>\n\n              {guideList &&\n                guideList.map((list, index) => (\n                  <div className=\"onday-total-box2\">\n                    <div className=\"onday-left-box2\">\n                      <img\n                        className=\"img-50 b-r-15\"\n                        src={list.rep_image}\n                        alt=\"#\"\n                      />\n                      &nbsp; &nbsp;\n                      <div>\n                        price : {list.en_price} $ / Title:{list.en_name}/ Name :\n                        {list.guide_name}\n                      </div>\n                    </div>\n                    <div className=\"oneday-right-box2\">\n                      <button\n                        className=\"btn btn-square btn-warning btn-s\"\n                        type=\"button\"\n                        onClick={() =>\n                          addBtn(list.en_name, list.rep_image, list.tour_no)\n                        }\n                      >\n                        추가\n                      </button>\n                    </div>\n                  </div>\n                ))}\n            </div>\n            <div className=\"btn-div\">\n              <button\n                className=\"btn btn-square btn-danger btn-sm\"\n                type=\"button\"\n                onClick={onReset}\n              >\n                초기화\n              </button>\n              &nbsp; &nbsp;\n              <button\n                className=\"btn btn-square btn-light btn-sm \"\n                onClick={onSubmithandler}\n              >\n                확인\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// function MachingG() {\n//   const [searchText, setSearchText] = useState(\"\")\n//   const [guideList, setguideList] = useState([])\n//   const [connectList, setconnectList] = useState([])\n//   const history = useHistory()\n//   const searchhandler = () => {\n//     if (!searchText) {\n//       alert(\"한글자이상입력하세요\")\n//       return\n//     }\n\n//     const form = new FormData()\n//     form.append(\"index\", 1)\n//     form.append(\"lang\", \"en\")\n//     form.append(\"search\", searchText)\n\n//     axios\n//       .post(\"/api/v1/recommend/searchT\", form, {\n//         headers: {\n//           Authorization: Cookie.get(\"token\")\n//         }\n//       })\n//       .then(response => {\n//         console.log(response)\n//         if (response.data.status === \"success\") {\n//           if (response.data.data.count > 0) {\n//             setguideList(response.data.data.list)\n//           } else {\n//             alert(\"일치하는 가이드가 없습니다\")\n//             setguideList([])\n//           }\n//         }\n//       })\n//       .catch(err => {\n//         alert(\"검색한데이터를 불러오지못했습니다\")\n//       })\n//   }\n//   return (\n//     <>\n//       {\" \"}\n//       <div className=\"oneday-seach-box2 \">\n//         <div className=\"size-box\">\n//           <input\n//             className=\"form-control\"\n//             type=\"text\"\n//             value={searchText}\n//             onChange={e => setSearchText(e.target.value)}\n//             placeholder=\"가이드의 이름을 한글로입력해주세요\"\n//             onKeyDown={e => {\n//               if (e.key === \"Enter\") {\n//                 searchhandler()\n//               }\n//             }}\n//           />\n\n//           <i className=\"fa fa-search fa-2x\" onClick={searchhandler} />\n//         </div>\n\n//         {guideList.map((lists, index) => (\n//           <div className=\"onday-total-box2\">\n//             <div className=\"onday-left-box2\">\n//               <img className=\"img-50 b-r-15\" src={lists.rep_image} alt=\"#\" />\n//               &nbsp; &nbsp;\n//               <div>\n//                 가격 : {lists.en_price}/상품명누락/Name :{lists.en_name}\n//               </div>\n//             </div>\n//             <div className=\"oneday-right-box2\">\n//               <button\n//                 className=\"btn btn-square btn-warning btn-s\"\n//                 type=\"button\"\n//                 onClick={() => {\n//                   history.push(`/recomdoned/cnt/${lists.tour_no}`)\n//                 }}\n//               >\n//                 추가\n//               </button>\n//             </div>\n//           </div>\n//         ))}\n//       </div>\n//     </>\n//   )\n// }\nexport default RcomendOneDayUpdate\n"]},"metadata":{},"sourceType":"module"}